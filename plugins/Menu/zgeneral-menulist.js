// Klo mau pake, pake aja ini bkn enc cma terser aja

import moment from"moment-timezone";import PhoneNumber from"awesome-phonenumber";import fs from"fs";import fetch from"node-fetch";import{pickRandom}from"../../lib/other-function.js";let menulist=async(m,{conn:conn,args:args})=>{const perintah=args[0]||"tags",tagCount={},tagHelpMapping={};Object.keys(global.plugins).filter((plugin=>!plugin.disabled)).forEach((plugin=>{const tagsArray=Array.isArray(global.plugins[plugin].tags)?global.plugins[plugin].tags:[];if(tagsArray.length>0){const helpArray=Array.isArray(global.plugins[plugin].help)?global.plugins[plugin].help:[global.plugins[plugin].help];tagsArray.forEach((tag=>{tag&&(tagCount[tag]?(tagCount[tag]++,tagHelpMapping[tag].push(...helpArray)):(tagCount[tag]=1,tagHelpMapping[tag]=[...helpArray]))}))}}));let help=Object.values(global.plugins).filter((plugin=>!plugin.disabled)).map((plugin=>({help:Array.isArray(plugin.tags)?plugin.help:[plugin.help],tags:Array.isArray(plugin.tags)?plugin.tags:[plugin.tags],prefix:"customPrefix"in plugin,limit:plugin.limit,premium:plugin.premium,enabled:!plugin.disabled})));if("tags"===perintah){const daftarTag=Object.keys(tagCount).sort().join("\n│"+htjava+".menulist "),readMore=String.fromCharCode(8206).repeat(4001);let _mpt;process.send&&(process.send("uptime"),_mpt=1e3*await new Promise((resolve=>{process.once("message",resolve),setTimeout(resolve,1e3)})));clockString(_mpt);let name=m.pushName||conn.getName(m.sender),prn=`${pickRandom(["./tumnil/1.jpg","./tumnil/2.jpg","./tumnil/3.jpg","./tumnil/4.jpg","./tumnil/5.jpg"])}`;conn.sendMessage(m.chat,{document:fs.readFileSync("./package.json"),fileName:wm,mimetype:global.doc,fileLength:99999999999999,pageCount:10909143,caption:`\n      ✧──···[ 𝘿𝙖𝙨𝙝𝙗𝙤𝙖𝙧𝙙 ]···──✧\n  ╭━━━━━━━━━━┈─✧\n  ┴    \n  │⬡ ${ucapan()} : ${name}\n  │⬡ ᴘʀᴇғɪx : [ . ]\n  │⬡ ᴍᴏᴅᴇ : ${global.opts.self?"Private":"ᴘᴜʙʟɪᴄ"}\n  │⬡ *${Object.keys(global.db.data.users).length}* ᴘᴇɴɢɢᴜɴᴀ \n  │⬡ *${Object.entries(global.db.data.chats).filter((chat=>chat[1].isBanned)).length}* ᴄʜᴀᴛ ᴛᴇʀʙᴀɴɴᴇᴅ \n  │⬡ *${Object.entries(global.db.data.users).filter((user=>user[1].banned)).length}* ᴘᴇɴɢɢᴜɴᴀ ᴛᴇʀʙᴀɴɴᴇᴅ \n  ┬\n  ├━━━━━━━━━━┈─⋆\n  │ ▸ *ʙᴏᴛ ɴᴀᴍᴇ: ᴊᴄ ᴍᴜʟᴛɪ ᴅᴇᴠɪᴄᴇ*\n  ┴ ▸ *ᴏᴡɴᴇʀ: Asep Official*\n  ✧\n  ┬ 📌 🇵‌🇮‌🇳‌🇳‌🇪‌🇩‌ :\n  │ ʙᴇʀɪ ᴊᴇᴅᴀ ʏᴀʜ ᴋᴀᴋ ^ω^\n  │ ᴄᴀʀᴀ ᴘᴇɴɢɢᴜɴᴀᴀɴ: \n  │ .menulist absen\n  ╰━━━━━━━━━━┈─◂\n  ${readMore}\n╭━━━━━━━━┈─◂\n│≡ *TAG LIST*\n┴\n│${global.htjava}\`\`\`.menulist ${daftarTag}\`\`\`\n╰━━━━━━━━┈─◂\n*Total Tag:${Object.keys(tagCount).length}*`,contextInfo:{externalAdReply:{title:wm,body:author,mediaType:1,thumbnail:fs.readFileSync(prn),sourceUrl:"https://Javanese",renderLargerThumbnail:!0}}},{quoted:m,ephemeralExpiration:global.ephemeral})}else if(tagCount[perintah]){const daftarHelp=tagHelpMapping[perintah].map(((helpItem,index)=>`.${helpItem} ${help[index].premium?"🅟":""}${help[index].limit?"Ⓛ":""}`)).join("\n││"+pmenus+" ");conn.sendMessage(m.chat,{text:`╭━━━━━━━━┈─◂\n│▼ *${perintah}*\n├┬━━━━━━━┈─◂\n││\n││${global.pmenus} \`\`\` ${daftarHelp}\`\`\`\n│╰┈─┈─┈━\n╰━━━━━━━━┈─◂\n\n┌┈┈┈┈┈┈\n┆ *Total Item:${tagHelpMapping[perintah].length}*\n╘══════`,contextInfo:{externalAdReply:{title:wm,body:author,mediaType:1,thumbnail:fs.readFileSync("./tumnil/1.jpg"),sourceUrl:"https://Javanese",renderLargerThumbnail:!0}}},{quoted:m,ephemeralExpiration:global.ephemeral})}else if("all"===perintah){const allTagsAndHelp=Object.keys(tagCount).map((tag=>`╭━━━━━━━━┈─◂\n│▼ ${tag}\n├┬━━━━━━━┈─◂\n││\n││\`\`\`${tagHelpMapping[tag].map(((helpItem,index)=>`.${helpItem} ${help[index].premium?"🅟":""}${help[index].limit?"Ⓛ":""}`)).join("\n││"+pmenus+" ")}\`\`\`\n│╰┈─┈─┈━\n╰━━━━━━━━┈─◂`)).join("\n");conn.sendMessage(m.chat,{text:`╭━━━━━━━━┈─◂\n│≡ *TAG LIST AND HELP*\n├━━━━━━━━┈─◂\n\n${allTagsAndHelp}\n\n*Total Tags:${Object.keys(tagCount).length}*`,contextInfo:{externalAdReply:{title:wm,body:author,mediaType:1,thumbnail:fs.readFileSync("./tumnil/1.jpg"),sourceUrl:"https://Javanese",renderLargerThumbnail:!0}}},{quoted:m,ephemeralExpiration:global.ephemeral})}else conn.sendMessage(m.chat,`Tag '${perintah}' tidak ditemukan. Gunakan 'menulist tags' atau 'menulist all' untuk melihat tag yang tersedia.`,{quoted:m,ephemeralExpiration:global.ephemeral})};menulist.help=["menulist"],menulist.tags=["main"],menulist.command=["menulist"];export default menulist;function clockString(ms){return[isNaN(ms)?"--":Math.floor(ms/36e5),isNaN(ms)?"--":Math.floor(ms/6e4)%60,isNaN(ms)?"--":Math.floor(ms/1e3)%60].map((v=>v.toString().padStart(2,0))).join(":")}function ucapan(){const hour_now=moment.tz("Asia/Jakarta").format("HH");return hour_now>="03"&&hour_now<="10"?"Ohayou...":hour_now>="10"&&hour_now<="15"||hour_now>="15"&&hour_now<="17"?"Konnichiwa...":hour_now>="17"&&hour_now<="18"||hour_now>="18"&&hour_now<="23"?"Konbanwa...":"Konbanwa"}