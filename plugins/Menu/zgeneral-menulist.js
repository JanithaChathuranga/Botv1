// Klo mau pake, pake aja ini bkn enc cma terser aja

import moment from"moment-timezone";import PhoneNumber from"awesome-phonenumber";import fs from"fs";import fetch from"node-fetch";import{pickRandom}from"../../lib/other-function.js";let menulist=async(m,{conn:conn,args:args})=>{const perintah=args[0]||"tags",tagCount={},tagHelpMapping={};Object.keys(global.plugins).filter((plugin=>!plugin.disabled)).forEach((plugin=>{const tagsArray=Array.isArray(global.plugins[plugin].tags)?global.plugins[plugin].tags:[];if(tagsArray.length>0){const helpArray=Array.isArray(global.plugins[plugin].help)?global.plugins[plugin].help:[global.plugins[plugin].help];tagsArray.forEach((tag=>{tag&&(tagCount[tag]?(tagCount[tag]++,tagHelpMapping[tag].push(...helpArray)):(tagCount[tag]=1,tagHelpMapping[tag]=[...helpArray]))}))}}));let help=Object.values(global.plugins).filter((plugin=>!plugin.disabled)).map((plugin=>({help:Array.isArray(plugin.tags)?plugin.help:[plugin.help],tags:Array.isArray(plugin.tags)?plugin.tags:[plugin.tags],prefix:"customPrefix"in plugin,limit:plugin.limit,premium:plugin.premium,enabled:!plugin.disabled})));if("tags"===perintah){const daftarTag=Object.keys(tagCount).sort().join("\nâ”‚"+htjava+".menulist "),readMore=String.fromCharCode(8206).repeat(4001);let _mpt;process.send&&(process.send("uptime"),_mpt=1e3*await new Promise((resolve=>{process.once("message",resolve),setTimeout(resolve,1e3)})));clockString(_mpt);let name=m.pushName||conn.getName(m.sender),prn=`${pickRandom(["./tumnil/1.jpg","./tumnil/2.jpg","./tumnil/3.jpg","./tumnil/4.jpg","./tumnil/5.jpg"])}`;conn.sendMessage(m.chat,{document:fs.readFileSync("./package.json"),fileName:wm,mimetype:global.doc,fileLength:99999999999999,pageCount:10909143,caption:`\n      âœ§â”€â”€Â·Â·Â·[ ð˜¿ð™–ð™¨ð™ð™—ð™¤ð™–ð™§ð™™ ]Â·Â·Â·â”€â”€âœ§\n  â•­â”â”â”â”â”â”â”â”â”â”â”ˆâ”€âœ§\n  â”´    \n  â”‚â¬¡ ${ucapan()} : ${name}\n  â”‚â¬¡ á´˜Ê€á´‡Ò“Éªx : [ . ]\n  â”‚â¬¡ á´á´á´…á´‡ : ${global.opts.self?"Private":"á´˜á´œÊ™ÊŸÉªá´„"}\n  â”‚â¬¡ *${Object.keys(global.db.data.users).length}* á´˜á´‡É´É¢É¢á´œÉ´á´€ \n  â”‚â¬¡ *${Object.entries(global.db.data.chats).filter((chat=>chat[1].isBanned)).length}* á´„Êœá´€á´› á´›á´‡Ê€Ê™á´€É´É´á´‡á´… \n  â”‚â¬¡ *${Object.entries(global.db.data.users).filter((user=>user[1].banned)).length}* á´˜á´‡É´É¢É¢á´œÉ´á´€ á´›á´‡Ê€Ê™á´€É´É´á´‡á´… \n  â”¬\n  â”œâ”â”â”â”â”â”â”â”â”â”â”ˆâ”€â‹†\n  â”‚ â–¸ *Ê™á´á´› É´á´€á´á´‡: á´Šá´„ á´á´œÊŸá´›Éª á´…á´‡á´ Éªá´„á´‡*\n  â”´ â–¸ *á´á´¡É´á´‡Ê€: Asep Official*\n  âœ§\n  â”¬ ðŸ“Œ ðŸ‡µâ€ŒðŸ‡®â€ŒðŸ‡³â€ŒðŸ‡³â€ŒðŸ‡ªâ€ŒðŸ‡©â€Œ :\n  â”‚ Ê™á´‡Ê€Éª á´Šá´‡á´…á´€ Êá´€Êœ á´‹á´€á´‹ ^Ï‰^\n  â”‚ á´„á´€Ê€á´€ á´˜á´‡É´É¢É¢á´œÉ´á´€á´€É´: \n  â”‚ .menulist absen\n  â•°â”â”â”â”â”â”â”â”â”â”â”ˆâ”€â—‚\n  ${readMore}\nâ•­â”â”â”â”â”â”â”â”â”ˆâ”€â—‚\nâ”‚â‰¡ *TAG LIST*\nâ”´\nâ”‚${global.htjava}\`\`\`.menulist ${daftarTag}\`\`\`\nâ•°â”â”â”â”â”â”â”â”â”ˆâ”€â—‚\n*Total Tag:${Object.keys(tagCount).length}*`,contextInfo:{externalAdReply:{title:wm,body:author,mediaType:1,thumbnail:fs.readFileSync(prn),sourceUrl:"https://Javanese",renderLargerThumbnail:!0}}},{quoted:m,ephemeralExpiration:global.ephemeral})}else if(tagCount[perintah]){const daftarHelp=tagHelpMapping[perintah].map(((helpItem,index)=>`.${helpItem} ${help[index].premium?"ðŸ…Ÿ":""}${help[index].limit?"â“":""}`)).join("\nâ”‚â”‚"+pmenus+" ");conn.sendMessage(m.chat,{text:`â•­â”â”â”â”â”â”â”â”â”ˆâ”€â—‚\nâ”‚â–¼ *${perintah}*\nâ”œâ”¬â”â”â”â”â”â”â”â”ˆâ”€â—‚\nâ”‚â”‚\nâ”‚â”‚${global.pmenus} \`\`\` ${daftarHelp}\`\`\`\nâ”‚â•°â”ˆâ”€â”ˆâ”€â”ˆâ”\nâ•°â”â”â”â”â”â”â”â”â”ˆâ”€â—‚\n\nâ”Œâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ\nâ”† *Total Item:${tagHelpMapping[perintah].length}*\nâ•˜â•â•â•â•â•â•`,contextInfo:{externalAdReply:{title:wm,body:author,mediaType:1,thumbnail:fs.readFileSync("./tumnil/1.jpg"),sourceUrl:"https://Javanese",renderLargerThumbnail:!0}}},{quoted:m,ephemeralExpiration:global.ephemeral})}else if("all"===perintah){const allTagsAndHelp=Object.keys(tagCount).map((tag=>`â•­â”â”â”â”â”â”â”â”â”ˆâ”€â—‚\nâ”‚â–¼ ${tag}\nâ”œâ”¬â”â”â”â”â”â”â”â”ˆâ”€â—‚\nâ”‚â”‚\nâ”‚â”‚\`\`\`${tagHelpMapping[tag].map(((helpItem,index)=>`.${helpItem} ${help[index].premium?"ðŸ…Ÿ":""}${help[index].limit?"â“":""}`)).join("\nâ”‚â”‚"+pmenus+" ")}\`\`\`\nâ”‚â•°â”ˆâ”€â”ˆâ”€â”ˆâ”\nâ•°â”â”â”â”â”â”â”â”â”ˆâ”€â—‚`)).join("\n");conn.sendMessage(m.chat,{text:`â•­â”â”â”â”â”â”â”â”â”ˆâ”€â—‚\nâ”‚â‰¡ *TAG LIST AND HELP*\nâ”œâ”â”â”â”â”â”â”â”â”ˆâ”€â—‚\n\n${allTagsAndHelp}\n\n*Total Tags:${Object.keys(tagCount).length}*`,contextInfo:{externalAdReply:{title:wm,body:author,mediaType:1,thumbnail:fs.readFileSync("./tumnil/1.jpg"),sourceUrl:"https://Javanese",renderLargerThumbnail:!0}}},{quoted:m,ephemeralExpiration:global.ephemeral})}else conn.sendMessage(m.chat,`Tag '${perintah}' tidak ditemukan. Gunakan 'menulist tags' atau 'menulist all' untuk melihat tag yang tersedia.`,{quoted:m,ephemeralExpiration:global.ephemeral})};menulist.help=["menulist"],menulist.tags=["main"],menulist.command=["menulist"];export default menulist;function clockString(ms){return[isNaN(ms)?"--":Math.floor(ms/36e5),isNaN(ms)?"--":Math.floor(ms/6e4)%60,isNaN(ms)?"--":Math.floor(ms/1e3)%60].map((v=>v.toString().padStart(2,0))).join(":")}function ucapan(){const hour_now=moment.tz("Asia/Jakarta").format("HH");return hour_now>="03"&&hour_now<="10"?"Ohayou...":hour_now>="10"&&hour_now<="15"||hour_now>="15"&&hour_now<="17"?"Konnichiwa...":hour_now>="17"&&hour_now<="18"||hour_now>="18"&&hour_now<="23"?"Konbanwa...":"Konbanwa"}