// Klo mau pake, pake aja ini bkn enc cma terser aja

export async function before(m){let user=global.db.data.users[m.sender];if(user.afk>-1){let tag=`@${m.sender.replace(/@.+/,"")}`,mentionedJid=[m.sender],caption=`\n  ${conn.getName(m.sender)} ${tag} berhenti AFK ${user.afkReason?" setelah "+user.afkReason:""}\n  Selama ${(new Date-user.afk).toTimeString()}\n  `.trim();conn.reply(m.chat,caption,m,{contextInfo:{mentionedJid:mentionedJid}}),user.afk=-1,user.afkReason=""}let jids=[...new Set([...m.mentionedJid||[],...m.quoted?[m.quoted.sender]:[]])];for(let jid of jids){let user=global.db.data.users[jid];if(!user)continue;let afkTime=user.afk;if(!afkTime||afkTime<0)continue;let reason=user.afkReason||"",tag=`@${m.sender.replace(/@.+/,"")}`,mentionedJid=[m.sender],caption=`\n  Jangan tag ${conn.getName(jid)} ${tag}!\n  Dia sedang AFK ${reason?"dengan alasan "+reason:"tanpa alasan"}\n  Selama ${(new Date-afkTime).toTimeString()}\n  `.trim();conn.reply(m.chat,caption,m,{contextInfo:{mentionedJid:mentionedJid}})}return!0}