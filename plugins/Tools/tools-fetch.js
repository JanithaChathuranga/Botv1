// Klo mau pake, pake aja ini bkn enc cma terser aja

import got from"got";import fetch from"node-fetch";import axios from"axios";import{format}from"util";const MAX_CONTENT_SIZE=107374182400;let handler=async(m,{text:text})=>{if(!text)throw"*Masukkan Link*\n*Ex:* s.id";text=addHttpsIfNeeded(text);let response,txt,{href:url,origin:origin}=new URL(text);try{response=await got(url,{headers:{referer:origin}}),txt=response.body}catch{try{response=await fetch(url,{headers:{referer:origin}}),txt=await response.text()}catch{try{response=await axios.get(url,{headers:{referer:origin}}),txt=response.data}catch{throw"Gagal mengambil data dari semua sumber"}}}if(response.headers["content-length"]>107374182400)return m.reply(`File terlalu besar. Ukuran maksimum adalah ${formatSize(107374182400)}`);if(!/text|json/.test(response.headers["content-type"]))return conn.sendFile(m.chat,url,ucapan,author,m);try{txt=format(JSON.parse(txt+""))}catch{txt+=""}finally{m.reply(txt.slice(0,65536)+"")}};function addHttpsIfNeeded(link){return/^https?:\/\//i.test(link)||(link="https://"+link),link}function formatSize(size){let i=0;for(;size>=1024&&i<4;)size/=1024,i++;return`${size.toFixed(2)} ${["B","KB","MB","GB","TB"][i]}`}handler.help=["fetch"],handler.tags=["tools"],handler.alias=["get","fetch"],handler.command=/^(fetch|get)$/i;export default handler;