// Klo mau pake, pake aja ini bkn enc cma terser aja

import yts from"yt-search";import{generateWAMessageFromContent}from"@whiskeysockets/baileys";import{format}from"util";let handler=async(m,{conn:conn,text:text})=>{if(!text)throw"✳️ What do you want me to search for on YouTube?";let results=await yts(text),tes=results.all,teks=results.all.map((v=>{switch(v.type){case"video":return`\n📹 *Type:* ${v.type}\n🆔 *VideoId:* ${v.videoId}\n🔗 *URL:* ${v.url}\n📺 *Title:* ${v.title}\n📝 *Description:* ${v.description}\n🖼️ *Image:* ${v.image}\n🖼️ *Thumbnail:* ${v.thumbnail}\n⏱️ *Seconds:* ${v.seconds}\n⏰ *Timestamp:* ${v.timestamp}\n⏲️ *Duration Timestamp:* ${v.duration.timestamp}\n⌛ *Duration Seconds:* ${v.duration.seconds}\n⌚ *Ago:* ${v.ago}\n👀 *Views:* ${formatNumber(v.views)}\n👤 *Author Name:* ${v.author.name}\n🔗 *Author URL:* ${v.author.url}\n   `.trim();case"canal":return`\n🔖 *${v.name}* (${v.url})\n⚡ ${v.subCountLabel} (${v.subCount}) Suscribe\n📽️ ${v.videoCount} videos\n`.trim()}})).filter((v=>v)).join("\n\n________________________\n\n"),ytthumb=await(await conn.getFile(tes[0].thumbnail)).data,msg=await generateWAMessageFromContent(m.chat,{extendedTextMessage:{text:teks,jpegThumbnail:ytthumb,contextInfo:{mentionedJid:[m.sender],externalAdReply:{body:"S E A R C H",containsAutoReply:!0,mediaType:1,mediaUrl:tes[0].url,renderLargerThumbnail:!0,showAdAttribution:!0,sourceId:"WudySoft",sourceType:"PDF",previewType:"PDF",sourceUrl:tes[0].url,thumbnail:ytthumb,thumbnailUrl:tes[0].thumbnail,title:htki+" Y O U T U B E "+htka}}}},{quoted:m});await conn.relayMessage(m.chat,msg.message,{})};handler.help=["","earch"].map((v=>"yts"+v+" <pencarian>")),handler.tags=["tools"],handler.command=/^y(outubesearch|ts(earch)?)$/i;export default handler;function formatNumber(num){const numString=Math.abs(num).toString(),numDigits=numString.length;if(numDigits<=3)return numString;const suffixIndex=Math.floor((numDigits-1)/3);let formattedNum=(num/Math.pow(1e3,suffixIndex)).toFixed(1);return formattedNum.endsWith(".0")&&(formattedNum=formattedNum.slice(0,-2)),formattedNum+["","k","M","B","T"][suffixIndex]}