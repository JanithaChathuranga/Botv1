// Klo mau pake, pake aja ini bkn enc cma terser aja

import gtts from"node-gtts";import{readFileSync,unlinkSync}from"fs";import{join}from"path";import fetch from"node-fetch";const defaultLang="id";let handler=async(m,{conn:conn,args:args,usedPrefix:usedPrefix,command:command})=>{let res,who=m.mentionedJid&&m.mentionedJid[0]?m.mentionedJid[0]:m.fromMe?conn.user.jid:m.sender,lang=(await conn.profilePictureUrl(who).catch((_=>hwaifu.getRandom())),await conn.getName(who),args[0]),text=args.slice(1).join(" ");2!==(args[0]||"").length&&(lang="id",text=args.join(" ")),!text&&m.quoted?.text&&(text=m.quoted.text);try{res=await tts(text,lang)}catch(e){if(m.reply(e+""),text=args.join(" "),!text)throw`Use example ${usedPrefix}${command} en hello world`;res=await tts(text,"id")}finally{res&&await conn.sendMessage(m.chat,{audio:res,seconds:fsizedoc,ptt:!0,mimetype:"audio/mpeg",fileName:"vn.mp3",waveform:[100,0,100,0,100,0,100]},{quoted:m})}};handler.help=["tts <lang> <teks>"],handler.tags=["tools"],handler.command=/^g?tts$/i;export default handler;function tts(text,lang="id"){return console.log(lang,text),new Promise(((resolve,reject)=>{try{let tts=gtts(lang),filePath=join(global.__dirname(import.meta.url),"../../tmp",1*new Date+".wav");tts.save(filePath,text,(()=>{resolve(readFileSync(filePath)),unlinkSync(filePath)}))}catch(e){reject(e)}}))}