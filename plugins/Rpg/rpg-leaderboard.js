// Klo mau pake, pake aja ini bkn enc cma terser aja

import{areJidsSameUser}from"@whiskeysockets/baileys";const leaderboards=["level","exp","limit","money","iron","gold","diamond","emerald","trash","potion","petFood","wood","rock","string","common","uncommon","mythic","legendary","pet"];let handler=async(m,{conn:conn,args:args,participants:participants,usedPrefix:usedPrefix,command:command})=>{let imgr=flaaa.getRandom(),users=Object.entries(global.db.data.users).map((([key,value])=>({...value,jid:key}))),leaderboard=leaderboards.filter((v=>v&&users.filter((user=>user&&user[v])).length)),type=(args[0]||"").toLowerCase();let wrong=`ğŸ”– á´›Êá´©á´‡ ÊŸÉªsá´› :\n${leaderboard.map((v=>`\nâ®• ${rpg.emoticon(v)} - ${v}\n`.trim())).join("\n")}\nâ€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“â€“\nğŸ’ğŸ»â€â™‚ á´›Éªá´© :\nâ®• á´›á´ á´ Éªá´‡á´¡ á´…ÉªÒ“Ò“á´‡Ê€á´‡É´á´› ÊŸá´‡á´€á´…á´‡Ê€Ê™á´á´€Ê€á´…:\n${usedPrefix}${command} [type]\nâ˜… á´‡xá´€á´á´©ÊŸá´‡:\n${usedPrefix}${command} legendary`.trim();if(!leaderboard.includes(type))return conn.sendFile(m.chat,imgr+"leaderboard","","*â€“â€“â€“â€“ã€ LEADERBOARD ã€â€“â€“â€“â€“*\n"+wrong,m);let page=isNumber(args[1])?Math.min(Math.max(parseInt(args[1]),0),(item=type,Math.ceil(users.filter((user=>user&&user[item])).length/0))):0;var item;let sortedItem=users.map(toNumber(type)).sort(sort(type)),userItem=sortedItem.map(enumGetKey),text=`\nğŸ† Ê€á´€É´á´‹: ${userItem.indexOf(m.sender)+1} á´á´œá´› á´Ò“ ${userItem.length}\n\n                    *â€¢ ${rpg.emoticon(type)} ${type} â€¢*\n\n${sortedItem.slice(0*page,5*page+5).map(((user,i)=>`${i+1}.*ï¹™${user[type]}ï¹š*- ${participants.some((p=>areJidsSameUser(user.jid,p.id)))?`${conn.getName(user.jid)} \nwa.me/`:"Ò“Ê€á´á´ á´á´›Êœá´‡Ê€ É¢Ê€á´á´œá´©\n @"}${user.jid.split`@`[0]}`)).join`\n\n`}\n`.trim();return conn.sendFile(m.chat,imgr+"leaderboard","","*â€“ã€ GLOBAL LEADERBOARD ã€â€“*\n"+text,m,{mentions:[...userItem.slice(0*page,5*page+5)].filter((v=>!participants.some((p=>areJidsSameUser(v,p.id)))))})};handler.help=["leaderboard [jumlah user]","lb [jumlah user]"],handler.tags=["xp"],handler.command=/^(leaderboard|lb)$/i;export default handler;function sort(property,ascending=!0){return property?(...args)=>args[1&ascending][property]-args[1&!ascending][property]:(...args)=>args[1&ascending]-args[1&!ascending]}function toNumber(property,_default=0){return property?(a,i,b)=>({...b[i],[property]:void 0===a[property]?_default:a[property]}):a=>void 0===a?_default:a}function enumGetKey(a){return a.jid}function isNumber(number){return number?"number"==typeof(number=parseInt(number))&&!isNaN(number):number}