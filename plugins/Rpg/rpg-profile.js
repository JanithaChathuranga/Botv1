// Klo mau pake, pake aja ini bkn enc cma terser aja

import{join}from"path";import{xpRange}from"../../lib/levelling.js";const checkUser=(id,adminList)=>{const admin=adminList.find((participant=>participant.id===id))?.admin;return"superadmin"===admin?"Super Admin":"admin"===admin?"Admin":"Member"},potongString=str=>str.length<=80?str:str.slice(0,80);let handler=async(m,{conn:conn,args:args,usedPrefix:usedPrefix,command:command,groupMetadata:groupMetadata})=>{const adminList=groupMetadata.participants;let who=m.mentionedJid&&m.mentionedJid[0]?m.mentionedJid[0]:m.fromMe?conn.user.jid:m.sender,{exp:exp,limit:limit,level:level,role:role,money:money,lastclaim:lastclaim,lastweekly:lastweekly,registered:registered,regTime:regTime,age:age,banned:banned,pasangan:pasangan}=global.db.data.users[who],{min:min,xp:xp,max:max}=xpRange(level,global.multiplier),name=m.name.split("\n")[0],pp=await conn.profilePictureUrl(who,"image").catch((_=>"https://telegra.ph/file/24fa902ead26340f3df2c.png"));void 0===global.db.data.users[who]&&(global.db.data.users[who]={exp:0,limit:10,lastclaim:0,registered:!1,name:conn.getName(m.sender),age:-1,regTime:-1,afk:-1,afkReason:"",banned:!1,level:0,lastweekly:0,role:"Warrior V",autolevelup:!1,money:0,pasangan:""});let math=max-xp,caption=`*YOUR PROFILE*\n*🏷️ Nama:* *(${name})* ${registered?"("+name+") ":""} ( @${who.split("@")[0]} )\n*❤️ Pasangan:*  ${pasangan?`@${pasangan.split("@")[0]}`:"Tidak Punya"}\n*💲 Money:* *RP* ${money}\n*🏆 Level* ${level}\n*🎋 Role:* ${role}\n*🧬 XP:* TOTAL ${exp} (${exp-min} / ${xp}) [${math<=0?`Siap untuk *${usedPrefix}levelup*`:`${math} XP lagi untuk levelup`}]\n*📨 Terdaftar:* ${registered?"Ya ("+new Date(regTime).toLocaleString()+")":"Tidak"} ${lastclaim>0?"\n*⏱️Terakhir Klaim:* "+new Date(lastclaim).toLocaleString():""}\n\n Ketik ${usedPrefix}inv untuk melihat Inventory RPG`;const contohStringPanjang=`Ini adalah profil dari ${name}, seorang ${checkUser(m.sender,adminList)} di ${groupMetadata.subject}.`;potongString(contohStringPanjang),await conn.profilePictureUrl(who,"image").catch((_=>"https://telegra.ph/file/24fa902ead26340f3df2c.png"));try{await conn.sendFile(m.chat,pp,"",caption,m,null,{mentions:conn.parseMention(caption)})}catch(e){await conn.sendFile(m.chat,"https://telegra.ph/file/24fa902ead26340f3df2c.png","",caption,m,null,{mentions:conn.parseMention(caption)})}};handler.help=["profile"].map((v=>v+" <url>")),handler.tags=["rpg"],handler.command=/^(pro(fil)?(file)?)$/i,handler.group=!0;export default handler;