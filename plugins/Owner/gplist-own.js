// Klo mau pake, pake aja ini bkn enc cma terser aja

import cp,{exec as _exec}from"child_process";import{promisify}from"util";let exec=promisify(_exec).bind(cp),handler=async(m,{conn:conn,isROwner:isROwner,usedPrefix:usedPrefix,command:command,text:text})=>{if(await m.reply(global.wait),!isROwner)return;if(!text)throw`uhm.. where the text?\n\nexample:\n${usedPrefix+command} lib/nas.js`;let o;try{o=await exec("ls "+text)}catch(e){o=e}finally{let{stdout:stdout,stderr:stderr}=o;if(stdout.trim())m.reply(stdout);else if(stderr.trim())if(stderr.includes("No such file or directory")){let path=text.substring(0,text.lastIndexOf("/")),lsOutput=await exec("ls "+path),{stdout:lsStdout,stderr:lsStderr}=lsOutput;lsStderr.trim()?m.reply(lsStderr):m.reply(`*🗃️ File not found!*\n==================================\n\n${lsStdout}`)}else m.reply(stderr)}};handler.help=["getplugin"].map((v=>v+" <text>")),handler.tags=["owner"],handler.command=/^(getplugin|plist)$/i,handler.rowner=!0;export default handler;