// Klo mau pake, pake aja ini bkn enc cma terser aja

import jimp_1 from"jimp";import{URL_REGEX}from"@whiskeysockets/baileys";let handler=async(m,{conn:conn,args:args})=>{let q=m.quoted?m.quoted:m,mime=(q.msg||q).mimetype||q.mediaType||"",botNumber=await conn.user.jid;if(/image/g.test(mime)&&!/webp/g.test(mime)){let media=await q.download(),{img:img}=await pepe(media);await conn.query({tag:"iq",attrs:{to:botNumber,type:"set",xmlns:"w:profile:picture"},content:[{tag:"picture",attrs:{type:"image"},content:img}]}),await m.reply("Succes update profile bot")}else{if(!args[0]||!args[0].match(URL_REGEX))throw"Where's the media?";{let{img:img}=await pepe(args[0]);await conn.query({tag:"iq",attrs:{to:botNumber,type:"set",xmlns:"w:profile:picture"},content:[{tag:"picture",attrs:{type:"image"},content:img}]}),await m.reply("Succes update profile bot")}}};handler.alias=handler.help=["setppbot"],handler.tags=["owner"],handler.command=/^setpp(bot)?$/i,handler.owner=!0;export default handler;async function pepe(media){const jimp=await jimp_1.read(media),min=jimp.getWidth(),max=jimp.getHeight(),cropped=jimp.crop(0,0,min,max);return{img:await cropped.scaleToFit(720,720).getBufferAsync(jimp_1.MIME_JPEG),preview:await cropped.normalize().getBufferAsync(jimp_1.MIME_JPEG)}}