// Klo mau pake, pake aja ini bkn enc cma terser aja

import Jimp from"jimp";import{URL_REGEX}from"@whiskeysockets/baileys";let handler=async(m,{conn:conn})=>{let q=m.quoted?m.quoted:m,mime=(q.msg||q).mimetype||q.mediaType||"",group=m.chat;if(/image/.test(mime)){var media=await q.download(),{img:img}=await generateProfilePicture(media);await conn.query({tag:"iq",attrs:{to:group,type:"set",xmlns:"w:profile:picture"},content:[{tag:"picture",attrs:{type:"image"},content:img}]}),m.reply("Succes update profile group ✓")}else{if(!args[0]||!args[0].match(URL_REGEX))throw"Where's the media?";var{img:img}=await generateProfilePicture(args[0]);await conn.query({tag:"iq",attrs:{to:group,type:"set",xmlns:"w:profile:picture"},content:[{tag:"picture",attrs:{type:"image"},content:img}]}),m.reply("Succes update profile group ✓")}};handler.help=["setppgrup"],handler.tags=["group"],handler.alias=["setppgc","setppgrup","setppgroup"],handler.command=/^setpp(gc|grup|group)$/i,handler.group=handler.admin=handler.botAdmin=!0;export default handler;async function generateProfilePicture(buffer){const jimp_1=await Jimp.read(buffer),minz=jimp_1.getWidth()>jimp_1.getHeight()?jimp_1.resize(720,Jimp.AUTO):jimp_1.resize(Jimp.AUTO,720);await Jimp.read(await minz.getBufferAsync(Jimp.MIME_JPEG));return{img:await minz.getBufferAsync(Jimp.MIME_JPEG)}}