// Klo mau pake, pake aja ini bkn enc cma terser aja

import{cpus as _cpus,totalmem,freemem}from"os";import util from"util";import os from"os";import osu from"node-os-utils";import fetch from"node-fetch";import{performance}from"perf_hooks";import{sizeFormatter}from"human-readable";let format=sizeFormatter({std:"JEDEC",decimalPlaces:2,keepTrailingZeroes:!1,render:(literal,symbol)=>`${literal} ${symbol}B`}),handler=async(m,{conn:conn,isRowner:isRowner})=>{let _muptime;process.send&&(process.send("uptime"),_muptime=1e3*await new Promise((resolve=>{process.once("message",resolve),setTimeout(resolve,1e3)})));let muptime=clockString(_muptime);const chats=Object.entries(conn.chats).filter((([id,data])=>id&&data.isChats)),groupsIn=chats.filter((([id])=>id.endsWith("@g.us"))),used=process.memoryUsage(),cpus=_cpus().map((cpu=>(cpu.total=Object.keys(cpu.times).reduce(((last,type)=>last+cpu.times[type]),0),cpu)));cpus.reduce(((last,cpu,_,{length:length})=>(last.total+=cpu.total,last.speed+=cpu.speed/length,last.times.user+=cpu.times.user,last.times.nice+=cpu.times.nice,last.times.sys+=cpu.times.sys,last.times.idle+=cpu.times.idle,last.times.irq+=cpu.times.irq,last)),{speed:0,total:0,times:{user:0,nice:0,sys:0,idle:0,irq:0}});let cpuPer,driveTotal,driveUsed,drivePer,ramTotal,ramUsed,netsIn,netsOut,NotDetect="Not Detect",cpux=osu.cpu,cpuCore=cpux.count(),drive=osu.drive,mem=osu.mem,netstat=osu.netstat,OS=(osu.os.hostname(),osu.os.platform()),cpuModel=(osu.os.ip(),cpux.model()),p1=cpux.usage().then((cpuPercentage=>{cpuPer=cpuPercentage})).catch((()=>{cpuPer=NotDetect})),p2=drive.info().then((info=>{driveTotal=info.totalGb+" GB",driveUsed=info.usedGb,drivePer=info.usedPercentage+"%"})).catch((()=>{driveTotal=NotDetect,driveUsed=NotDetect,drivePer=NotDetect})),p3=mem.info().then((info=>{ramTotal=info.totalMemMb,ramUsed=info.usedMemMb})).catch((()=>{ramTotal=NotDetect,ramUsed=NotDetect})),p4=netstat.inOut().then((info=>{netsIn=info.total.inputMb+" MB",netsOut=info.total.outputMb+" MB"})).catch((()=>{netsIn=NotDetect,netsOut=NotDetect}));await Promise.all([p1,p2,p3,p4]);let _ramTotal=ramTotal+" MB",cek=await(await fetch("https://api.myip.com")).json().catch((_=>"error")),ip="error"==cek?"É´á´á´› á´…á´‡á´›á´‡á´„á´›":cek.ip,cr="error"==cek?"É´á´á´› á´…á´‡á´›á´‡á´„á´›":cek.country,cc="error"==cek?"É´á´á´› á´…á´‡á´›á´‡á´„á´›":cek.cc,d=new Date(new Date+36e5),weeks=d.toLocaleDateString("id",{weekday:"long"}),dates=d.toLocaleDateString("id",{day:"numeric",month:"long",year:"numeric"}),times=d.toLocaleTimeString("id",{hour:"numeric",minute:"numeric",second:"numeric"}),old=performance.now(),neww=performance.now(),speed=neww-old,str=`- *á´˜ Éª É´ É¢* -\n${Math.round(neww-old)}ms\n${speed}ms\n\n- *Ê€ á´œ É´ á´› Éª á´ á´‡* -\n${muptime}\n${readMore}\n- *á´„ Êœ á´€ á´› s* -\nâ€¢ *${groupsIn.length}* Group Chats\nâ€¢ *${groupsIn.length}* Groups Joined\nâ€¢ *${groupsIn.length-groupsIn.length}* Groups Left\nâ€¢ *${chats.length-groupsIn.length}* Personal Chats\nâ€¢ *${chats.length}* Total Chats\n\n- *s á´‡ Ê€ á´  á´‡ Ê€* -\n*ðŸ›‘ Rá´€á´:* ${ramUsed} / ${_ramTotal}(${/[0-9.+/]/g.test(ramUsed)&&/[0-9.+/]/g.test(ramTotal)?Math.round(ramUsed/ramTotal*100)+"%":NotDetect})\n*ðŸ”µ FÊ€á´‡á´‡Rá´€á´:* ${format(freemem())}\n\n*ðŸ”­ á´˜ÊŸá´€á´›Ò“á´Ê€á´:* ${os.platform()}\n*ðŸ§¿ sá´‡Ê€á´ á´‡Ê€:* ${os.hostname()}\n*ðŸ’» á´s:* ${OS}\n*ðŸ“ Éªá´˜:* ${ip}\n*ðŸŒŽ á´„á´á´œÉ´á´›Ê€Ê:* ${cr}\n*ðŸ’¬ á´„á´á´œÉ´á´›Ê€Ê á´„á´á´…á´‡:* ${cc}\n*ðŸ“¡ á´„á´˜á´œ á´á´á´…á´‡ÊŸ:* ${cpuModel}\n*ðŸ”® á´„á´˜á´œ á´„á´Ê€á´‡:* ${cpuCore} Core\n*ðŸŽ›ï¸ á´„á´˜á´œ:* ${cpuPer}%\n*â° á´›Éªá´á´‡ sá´‡Ê€á´ á´‡Ê€:* ${times}\n\n- *á´ á´› Êœ á´‡ Ê€* -\n*ðŸ“… Wá´‡á´‡á´‹êœ±:* ${weeks}\n*ðŸ“† Dá´€á´›á´‡êœ±:* ${dates}\n*ðŸ” Ná´‡á´›êœ±IÉ´:* ${netsIn}\n*ðŸ” Ná´‡á´›êœ±Oá´œá´›:* ${netsOut}\n*ðŸ’¿ DÊ€Éªá´ á´‡Tá´á´›á´€ÊŸ:* ${driveTotal}\n*ðŸ’¿ DÊ€Éªá´ á´‡Uêœ±á´‡á´…:* ${driveUsed}\n*âš™ï¸ DÊ€Éªá´ á´‡Pá´‡Ê€:* ${drivePer}\n\n${readMore}\n*${htjava} É´á´á´…á´‡JS á´á´‡á´á´Ê€Ê á´œsá´€É¢á´‡*\n${"```"+Object.keys(used).map(((key,_,arr)=>`${key.padEnd(Math.max(...arr.map((v=>v.length)))," ")}: ${format(used[key])}`)).join("\n")+"```"}\n`;const userInput=Math.round(neww-old),result=Number((0===userInput?1e3:2===userInput?2e3:userInput).toString().replace(/[^0-9]/g,""));await m.reply(wait),await conn.relayMessage(m.chat,{requestPaymentMessage:{currencyCodeIso4217:"INR",amount1000:result,requestFrom:"0@s.whatsapp.net",noteMessage:{extendedTextMessage:{text:str,contextInfo:{mentionedJid:[m.sender],externalAdReply:{showAdAttribution:!0}}}}}},{})};handler.help=["ping","speed"],handler.tags=["info","tools"],handler.command=/^(ping|speed|info)$/i;export default handler;const more=String.fromCharCode(8206),readMore=more.repeat(4001);function clockString(ms){return[isNaN(ms)?"--":Math.floor(ms/864e5)," *Days â˜€ï¸*\n ",isNaN(ms)?"--":Math.floor(ms/36e5)%24," *Hours ðŸ•*\n ",isNaN(ms)?"--":Math.floor(ms/6e4)%60," *Minute â°*\n ",isNaN(ms)?"--":Math.floor(ms/1e3)%60," *Second â±ï¸* "].map((v=>v.toString().padStart(2,0))).join("")}