// Klo mau pake, pake aja ini bkn enc cma terser aja

import{cpus as _cpus,totalmem,freemem}from"os";import util from"util";import os from"os";import osu from"node-os-utils";import fetch from"node-fetch";import{performance}from"perf_hooks";import{sizeFormatter}from"human-readable";let format=sizeFormatter({std:"JEDEC",decimalPlaces:2,keepTrailingZeroes:!1,render:(literal,symbol)=>`${literal} ${symbol}B`}),handler=async(m,{conn:conn,isRowner:isRowner})=>{let _muptime;process.send&&(process.send("uptime"),_muptime=1e3*await new Promise((resolve=>{process.once("message",resolve),setTimeout(resolve,1e3)})));let muptime=clockString(_muptime);const chats=Object.entries(conn.chats).filter((([id,data])=>id&&data.isChats)),groupsIn=chats.filter((([id])=>id.endsWith("@g.us"))),used=process.memoryUsage(),cpus=_cpus().map((cpu=>(cpu.total=Object.keys(cpu.times).reduce(((last,type)=>last+cpu.times[type]),0),cpu)));cpus.reduce(((last,cpu,_,{length:length})=>(last.total+=cpu.total,last.speed+=cpu.speed/length,last.times.user+=cpu.times.user,last.times.nice+=cpu.times.nice,last.times.sys+=cpu.times.sys,last.times.idle+=cpu.times.idle,last.times.irq+=cpu.times.irq,last)),{speed:0,total:0,times:{user:0,nice:0,sys:0,idle:0,irq:0}});let cpuPer,driveTotal,driveUsed,drivePer,ramTotal,ramUsed,netsIn,netsOut,NotDetect="Not Detect",cpux=osu.cpu,cpuCore=cpux.count(),drive=osu.drive,mem=osu.mem,netstat=osu.netstat,OS=(osu.os.hostname(),osu.os.platform()),cpuModel=(osu.os.ip(),cpux.model()),p1=cpux.usage().then((cpuPercentage=>{cpuPer=cpuPercentage})).catch((()=>{cpuPer=NotDetect})),p2=drive.info().then((info=>{driveTotal=info.totalGb+" GB",driveUsed=info.usedGb,drivePer=info.usedPercentage+"%"})).catch((()=>{driveTotal=NotDetect,driveUsed=NotDetect,drivePer=NotDetect})),p3=mem.info().then((info=>{ramTotal=info.totalMemMb,ramUsed=info.usedMemMb})).catch((()=>{ramTotal=NotDetect,ramUsed=NotDetect})),p4=netstat.inOut().then((info=>{netsIn=info.total.inputMb+" MB",netsOut=info.total.outputMb+" MB"})).catch((()=>{netsIn=NotDetect,netsOut=NotDetect}));await Promise.all([p1,p2,p3,p4]);let _ramTotal=ramTotal+" MB",cek=await(await fetch("https://api.myip.com")).json().catch((_=>"error")),ip="error"==cek?"ɴᴏᴛ ᴅᴇᴛᴇᴄᴛ":cek.ip,cr="error"==cek?"ɴᴏᴛ ᴅᴇᴛᴇᴄᴛ":cek.country,cc="error"==cek?"ɴᴏᴛ ᴅᴇᴛᴇᴄᴛ":cek.cc,d=new Date(new Date+36e5),weeks=d.toLocaleDateString("id",{weekday:"long"}),dates=d.toLocaleDateString("id",{day:"numeric",month:"long",year:"numeric"}),times=d.toLocaleTimeString("id",{hour:"numeric",minute:"numeric",second:"numeric"}),old=performance.now(),neww=performance.now(),speed=neww-old,str=`- *ᴘ ɪ ɴ ɢ* -\n${Math.round(neww-old)}ms\n${speed}ms\n\n- *ʀ ᴜ ɴ ᴛ ɪ ᴍ ᴇ* -\n${muptime}\n${readMore}\n- *ᴄ ʜ ᴀ ᴛ s* -\n• *${groupsIn.length}* Group Chats\n• *${groupsIn.length}* Groups Joined\n• *${groupsIn.length-groupsIn.length}* Groups Left\n• *${chats.length-groupsIn.length}* Personal Chats\n• *${chats.length}* Total Chats\n\n- *s ᴇ ʀ ᴠ ᴇ ʀ* -\n*🛑 Rᴀᴍ:* ${ramUsed} / ${_ramTotal}(${/[0-9.+/]/g.test(ramUsed)&&/[0-9.+/]/g.test(ramTotal)?Math.round(ramUsed/ramTotal*100)+"%":NotDetect})\n*🔵 FʀᴇᴇRᴀᴍ:* ${format(freemem())}\n\n*🔭 ᴘʟᴀᴛғᴏʀᴍ:* ${os.platform()}\n*🧿 sᴇʀᴠᴇʀ:* ${os.hostname()}\n*💻 ᴏs:* ${OS}\n*📍 ɪᴘ:* ${ip}\n*🌎 ᴄᴏᴜɴᴛʀʏ:* ${cr}\n*💬 ᴄᴏᴜɴᴛʀʏ ᴄᴏᴅᴇ:* ${cc}\n*📡 ᴄᴘᴜ ᴍᴏᴅᴇʟ:* ${cpuModel}\n*🔮 ᴄᴘᴜ ᴄᴏʀᴇ:* ${cpuCore} Core\n*🎛️ ᴄᴘᴜ:* ${cpuPer}%\n*⏰ ᴛɪᴍᴇ sᴇʀᴠᴇʀ:* ${times}\n\n- *ᴏ ᴛ ʜ ᴇ ʀ* -\n*📅 Wᴇᴇᴋꜱ:* ${weeks}\n*📆 Dᴀᴛᴇꜱ:* ${dates}\n*🔁 NᴇᴛꜱIɴ:* ${netsIn}\n*🔁 NᴇᴛꜱOᴜᴛ:* ${netsOut}\n*💿 DʀɪᴠᴇTᴏᴛᴀʟ:* ${driveTotal}\n*💿 DʀɪᴠᴇUꜱᴇᴅ:* ${driveUsed}\n*⚙️ DʀɪᴠᴇPᴇʀ:* ${drivePer}\n\n${readMore}\n*${htjava} ɴᴏᴅᴇJS ᴍᴇᴍᴏʀʏ ᴜsᴀɢᴇ*\n${"```"+Object.keys(used).map(((key,_,arr)=>`${key.padEnd(Math.max(...arr.map((v=>v.length)))," ")}: ${format(used[key])}`)).join("\n")+"```"}\n`;const userInput=Math.round(neww-old),result=Number((0===userInput?1e3:2===userInput?2e3:userInput).toString().replace(/[^0-9]/g,""));await m.reply(wait),await conn.relayMessage(m.chat,{requestPaymentMessage:{currencyCodeIso4217:"INR",amount1000:result,requestFrom:"0@s.whatsapp.net",noteMessage:{extendedTextMessage:{text:str,contextInfo:{mentionedJid:[m.sender],externalAdReply:{showAdAttribution:!0}}}}}},{})};handler.help=["ping","speed"],handler.tags=["info","tools"],handler.command=/^(ping|speed|info)$/i;export default handler;const more=String.fromCharCode(8206),readMore=more.repeat(4001);function clockString(ms){return[isNaN(ms)?"--":Math.floor(ms/864e5)," *Days ☀️*\n ",isNaN(ms)?"--":Math.floor(ms/36e5)%24," *Hours 🕐*\n ",isNaN(ms)?"--":Math.floor(ms/6e4)%60," *Minute ⏰*\n ",isNaN(ms)?"--":Math.floor(ms/1e3)%60," *Second ⏱️* "].map((v=>v.toString().padStart(2,0))).join("")}