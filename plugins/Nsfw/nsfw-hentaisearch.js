// Klo mau pake, pake aja ini bkn enc cma terser aja

import cheerio from"cheerio";import axios from"axios";let handler=async(m,{conn:conn,text:text,__dirname:__dirname,usedPrefix:usedPrefix,command:command})=>{if(!text)throw"*[❗] MASUKKAN NAMA HENTAI YANG AKAN DICARI*";m.reply(wait);let randomThumbnail,searchResults=await searchHentai(text),teks=searchResults.result.map(((v,i)=>`\n${i+1}. *_${v.title}_*\n↳ 📺 *_Views:_* ${v.views}\n↳ 🎞️ *_Link:_* ${v.url}`)).join("\n\n");if(searchResults.result.length>0){let randomIndex=Math.floor(Math.random()*searchResults.result.length);randomThumbnail=searchResults.result[randomIndex].thumbnail}else randomThumbnail="https://pictures.hentai-foundry.com/e/Error-Dot/577798/Error-Dot-577798-Zero_Two.png",teks="*[❗] TIDAK ADA HASIL PENCARIAN*";conn.sendFile(m.chat,randomThumbnail,"error.jpg",teks,m)};handler.command=/^(hentaisearch|searchhentai)$/i,handler.help=["hentaisearch","searchhentai"],handler.tags=["nsfw"];export default handler;async function searchHentai(search){return new Promise(((resolve,reject)=>{axios.get("https://hentai.tv/?s="+search).then((async({data:data})=>{let $=cheerio.load(data),result={},res=[];result.coder="rem-comp",result.result=res,result.warning="It is strictly forbidden to reupload this code, copyright © 2022 by rem-comp",$("div.flex > div.crsl-slde").each((function(a,b){let hasil={thumbnail:$(b).find("img").attr("src"),title:$(b).find("a").text().trim(),views:$(b).find("p").text().trim(),url:$(b).find("a").attr("href")};res.push(hasil)})),resolve(result)})).catch((err=>{console.log(err)}))}))}